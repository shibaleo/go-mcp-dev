# 要件一覧

本ドキュメントは、ペルソナの受け入れ基準（PSN-x-ACC-xx）を要件の観点から整理し、
重複のないREQ-xxx IDを付与したものである。

---

## 凡例

| 分類 | 説明 | 例 |
|------|------|-----|
| **自前実装** | 自分でコード実装・設計できる | 管理UI, Token Exchanger, MCPサーバー本体, ログ設計, 権限分離, タスク並列実行, Vault |
| **外部規格依存** | 外部サービスのAPI仕様・プロトコルに従う | OAuth 2.0/2.1, 各サービスAPI (Google, Notion, GitHub等), MCP仕様, TLS, JWT |
| **LLMベンダ依存** | LLMクライアント・ホストの実装に依存 | MCPクライアント, ツール呼び出し判断, 通知UI, コンテキスト管理, 並列呼び出しサポート |

---

## 要件一覧

### 自前実装（40項目）

| REQ-ID  | 項目                         | 備考                      | 元ID                        |
| ------- | -------------------------- | ----------------------- | -------------------------- |
| REQ-001 | 個人用アカウントは他アカウントと物理的・論理的に分離 | OAuth認証・アカウント別データ分離     | PSN-1-ACC-02               |
| REQ-002 | 依存関係のないタスクは並列実行される         | タスクキュー・並列実行制御           | PSN-1-ACC-03               |
| REQ-003 | タスク完了結果だけを返す（軽量タスク）        | レスポンス設計                 | PSN-1-ACC-03               |
| REQ-009 | 成果物が利用可能状態で返却              | ツールレスポンス                | PSN-1-ACC-08               |
| REQ-010 | 軽量タスクは並列処理され待ち時間を最小化       | 並列実行制御                  | PSN-1-ACC-08               |
| REQ-011 | 大量の単純・軽量タスクを並列で処理できる       | タスクキュー                  | PSN-2-ACC-01               |
| REQ-012 | 処理はバックグラウンド実行が可能           | 非同期タスク実行                | PSN-2-ACC-01               |
| REQ-014 | チャットUIや他作業をブロックしない         | 非同期レスポンス                | PSN-2-ACC-01               |
| REQ-015 | 業務データは原則ローカルPC内で完結         | ローカルファイル操作              | PSN-2-ACC-02               |
| REQ-017 | データ保存先・持ち出し範囲を明示的に制御できる    | 保存先制御                   | PSN-2-ACC-02               |
| REQ-018 | ログ・中間生成物もローカル管理される         | ログ設計                    | PSN-2-ACC-02               |
| REQ-019 | 対外コミュニケーションは自動実行しない        | 確認必須設計                  | PSN-2-ACC-03               |
| REQ-020 | 必要なときだけ詳細を確認できる            | ログ取得ツール                 | PSN-2-ACC-05               |
| REQ-021 | 個人裁量の範囲で完結する               | 個人利用前提                  | PSN-2-ACC-06               |
| REQ-022 | 調査・生成・準備タスクは可能な限り並列実行されること | 並列実行制御                  | PSN-3-ACC-01               |
| REQ-023 | 他人のデータ侵害につながる設計は避けられていること  | アクセス制御                  | PSN-3-ACC-05               |
| REQ-024 | 権限・データ境界が明確に分離されていること      | 権限分離                    | PSN-3-ACC-05               |
| REQ-025 | デフォルトが安全側の実装であること          | 安全デフォルト                 | PSN-3-ACC-05               |
| REQ-026 | 基本的に放置運用が可能であること           | 安定実装                    | PSN-3-ACC-06               |
| REQ-027 | 障害対応が頻発しないこと               | 堅牢実装                    | PSN-3-ACC-06               |
| REQ-028 | 長期間触らなくても再開可能であること         | ステートレス設計                | PSN-3-ACC-06               |
| REQ-029 | 状態把握に必要な情報がログから得られること      | 構造化ログ                   | PSN-3-ACC-06               |
| REQ-030 | ログが構造化されて保存されること           | JSON形式ログ                | PSN-3-ACC-07               |
| REQ-031 | 後から検索・分析できること              | ログ検索                    | PSN-3-ACC-07               |
| REQ-032 | ログが過剰でノイズだらけにならないこと        | ログレベル設計                 | PSN-3-ACC-07               |
| REQ-033 | ログ取得が動作や集中を妨げないこと          | 非同期ログ                   | PSN-3-ACC-07               |
| REQ-034 | 個人利用を前提として成立すること           | 個人向け設計                  | PSN-3-ACC-08               |
| REQ-035 | OSSとして公開可能であること            | ライセンス・品質                | PSN-3-ACC-08               |
| REQ-036 | 大規模・商用SaaS運用を前提としないこと      | 軽量設計                    | PSN-3-ACC-08               |
| REQ-037 | 少人数利用でも破綻しない設計であること        | スケーラビリティ                | PSN-3-ACC-08               |
| REQ-048 | 実行速度は体感的にストレスがない           | ツール高速化                  | PSN-2-ACC-01               |
| REQ-052 | 失敗時は必ず明確に通知される             | エラーレスポンス                | PSN-2-ACC-05               |
| REQ-057 | 待ち時間が思考を中断しないこと            | 高速レスポンス実装               | PSN-3-ACC-01               |
| REQ-058 | 「待たされている感覚」が最小限であること       | ツール高速化                  | PSN-3-ACC-01               |
| REQ-059 | 致命的なセキュリティリスクは必ず明示されること    | リスク情報返却                 | PSN-3-ACC-03               |
| REQ-060 | データ消失リスクは極力回避されること         | バックアップ・確認ステップ           | PSN-3-ACC-04               |
| REQ-061 | 他人に被害が出る可能性のある失敗は回避されること   | 危険操作の確認ステップ             | PSN-3-ACC-04               |
| REQ-093 | 初回セットアップ                   | MCP接続、認可フロー実行、トークン保存    | PSN-1-ACC-02, PSN-2-ACC-01 |
| REQ-094 | 一元的管理UIの提供                 | OAuthクライアント登録、トークン・設定管理 | PSN-1-ACC-02, PSN-1-ACC-04 |
| REQ-095 | 管理画面のログイン機能                | 他人に見られない厳重なセキュリティ       | PSN-3-ACC-05, PSN-2-ACC-02 |
| REQ-096 | MCPサーバーの単一エンドポイント提供        | 独自ドメイン取得・運用             | PSN-1-ACC-04, PSN-2-ACC-01 |
| REQ-005 | 信頼性の低いWeb情報は混入しない          | 外部API信頼ソース限定            | PSN-1-ACC-05               |

### 外部規格依存（23項目）

| REQ-ID  | 項目                            | 備考                    | 元ID          |
| ------- | ----------------------------- | --------------------- | ------------ |
| REQ-004 | 参照データはユーザー指定の範囲に限定            | 外部API検索範囲制限           | PSN-1-ACC-05 |
| REQ-006 | タスク・アイデア・思考が自動で記録される          | Notion/Supabase API連携 | PSN-1-ACC-06 |
| REQ-007 | 手作業での記録不要                     | 外部API自動記録             | PSN-1-ACC-06 |
| REQ-008 | データを自動取得・整理                   | 外部API連携               | PSN-1-ACC-07 |
| REQ-013 | ユーザー操作なしで継続実行できる              | OAuth自動リフレッシュ         | PSN-2-ACC-01 |
| REQ-016 | 外部クラウドへの自動送信を行わない             | 外部API送信制限             | PSN-2-ACC-02 |
| REQ-038 | 個人用情報は仕事用・開発用と混ざらない           | OAuth/MCP アカウント別ツール制御 | PSN-1-ACC-01 |
| REQ-039 | 必要最低限の情報だけがコンテキストに含まれる        | MCP initialize時ツール制御  | PSN-1-ACC-01 |
| REQ-044 | コンテキスト生成は過去の自分の知識＋少し背伸びした知識のみ | 外部API RAG個人データ優先      | PSN-1-ACC-05 |
| REQ-045 | 俯瞰的レポート・分析が生成可能               | 外部APIデータ取得            | PSN-1-ACC-06 |
| REQ-046 | 創作タスクや日常活動への影響を考慮した助言が可能      | 外部APIデータ提供            | PSN-1-ACC-07 |
| REQ-047 | アイデアを入力すると即座にタスク化・実行可能        | 外部APIタスク登録            | PSN-1-ACC-08 |
| REQ-050 | タスク構造をDAG等で可視化できる             | MCPデータ構造提供            | PSN-2-ACC-04 |
| REQ-051 | 計画と実行が分離されている                 | MCPツール分離              | PSN-2-ACC-04 |
| REQ-077 | 最小構成で即座に動作確認できること             | MCP仕様準拠               | PSN-3-ACC-02 |
| REQ-079 | 後から修正・差し替えが容易な構造であること         | MCPモジュール設計            | PSN-3-ACC-02 |
| REQ-082 | セキュリティチェックは別工程で実施できること        | OAuth/API権限検証         | PSN-3-ACC-03 |
| REQ-083 | テスト結果とセキュリティ結果が明確に区別されること     | 外部API検証分離             | PSN-3-ACC-03 |
| REQ-084 | ローカル・個人環境での破損は許容されること         | MCP運用方針               | PSN-3-ACC-04 |
| REQ-085 | 一時的な停止や不安定さは許容されること           | 外部API依存運用             | PSN-3-ACC-04 |
| REQ-086 | 外部公開時のリスクポイントが明示されること         | OAuth/API権限ドキュメント     | PSN-3-ACC-05 |

### LLMベンダ依存（33項目）

| REQ-ID | 項目 | 備考 | 元ID |
| ------ | ---- | ---- | ---- |
| REQ-040 | タスク実行時に不要な情報参照が発生しない | LLMツール選択判断 | PSN-1-ACC-01 |
| REQ-041 | アカウント切り替え操作は最小限 | MCPクライアントUI操作 | PSN-1-ACC-02 |
| REQ-042 | ユーザーは複数UI操作を意識せずタスクが完了 | MCPクライアントUX | PSN-1-ACC-04 |
| REQ-043 | 必要なツールだけをLLMが呼び出す | LLMツール選択判断 | PSN-1-ACC-04 |
| REQ-049 | 重要な判断ポイントは人間確認が前提 | MCPクライアント確認UI | PSN-2-ACC-03 |
| REQ-053 | 判断権は常にユーザーに残る | MCPクライアント確認フロー | PSN-2-ACC-06 |
| REQ-054 | 自動化による時間短縮が体感できる | 主観的体感 | PSN-2-ACC-07 |
| REQ-055 | 日常業務に支障を出さない | MCPクライアント安定性 | PSN-2-ACC-07 |
| REQ-056 | 長時間の監視・操作を要求しない | MCPクライアント自動化 | PSN-2-ACC-07 |
| REQ-062 | 危険な操作は事前確認が入ること | MCPクライアント確認UI | PSN-3-ACC-09 |
| REQ-063 | 課題が実際に解決されていること | 主観的判断 | PSN-3-ACC-10 |
| REQ-064 | タスク失敗時のみ通知される | MCPクライアント通知設計 | PSN-1-ACC-03 |
| REQ-065 | ユーザーの操作や承認は最小限 | MCPクライアントUX設計 | PSN-1-ACC-03 |
| REQ-066 | 異常や偏りのみ通知 | MCPクライアント通知判定 | PSN-1-ACC-07 |
| REQ-067 | 税務・業務判断を自動で確定しない | LLMプロンプト設計 | PSN-2-ACC-03 |
| REQ-068 | LLMは候補・下書き・整理までに留まる | LLMプロンプト設計 | PSN-2-ACC-03 |
| REQ-069 | 自然言語の業務説明からタスクを分解できる | LLM能力 | PSN-2-ACC-04 |
| REQ-070 | 依存関係・並列可能性を明示できる | LLM分析能力 | PSN-2-ACC-04 |
| REQ-071 | 成功時の通知は最小限に抑えられる | MCPクライアント通知設計 | PSN-2-ACC-05 |
| REQ-072 | 細かいログはデフォルト非表示 | MCPクライアントログ表示 | PSN-2-ACC-05 |
| REQ-073 | 業務フローや組織を変えることを前提としない | 設計方針 | PSN-2-ACC-06 |
| REQ-074 | 自動化の責任はユーザーが負う | 利用規約 | PSN-2-ACC-06 |
| REQ-075 | 学習時間を侵食しないUXである | MCPクライアントUX設計 | PSN-2-ACC-07 |
| REQ-076 | 不要な確認往復が発生しないこと | LLM/MCPクライアントUX | PSN-3-ACC-01 |
| REQ-078 | 初期段階で完璧な設計を要求しないこと | 開発方針 | PSN-3-ACC-02 |
| REQ-080 | 実装は「動くこと」を最優先に進められること | 開発方針 | PSN-3-ACC-02 |
| REQ-081 | テストコードは実装後に自動生成できること | LLM能力 | PSN-3-ACC-03 |
| REQ-087 | AIは伴走者として振る舞うこと | LLMプロンプト設計 | PSN-3-ACC-09 |
| REQ-088 | 抽象的・最終的な判断を強制しないこと | LLMプロンプト設計 | PSN-3-ACC-09 |
| REQ-089 | 選択肢と理由を提示すること | LLMプロンプト設計 | PSN-3-ACC-09 |
| REQ-090 | 使用者の思考がすっきりすること | 主観的成果 | PSN-3-ACC-10 |
| REQ-091 | 「便利になった」と実感できること | 主観的成果 | PSN-3-ACC-10 |
| REQ-092 | 同じ課題を持つ人にも価値が伝わること | ドキュメント・コミュニケーション | PSN-3-ACC-10 |

---

## 集計

| 分類 | 件数 |
|------|------|
| 自前実装 | 40 |
| 外部規格依存 | 23 |
| LLMベンダ依存 | 33 |
| **合計** | **96** |

---

## 要件の分配先

| 分類 | 分配先 |
|------|--------|
| 自前実装 | req-fnr.md, req-nfr.md |
| 外部規格依存 | req-fnr.md, req-nfr.md |
| LLMベンダ依存 | req-ofs.md |

---

## 関連ドキュメント

- [要件サマリー](req-summary.md)
- [機能要件](req-fnr.md)
- [非機能要件](req-nfr.md)
- [スコープ外機能](req-ofs.md)
- [ペルソナサマリー](user-analysis-summary.md)
