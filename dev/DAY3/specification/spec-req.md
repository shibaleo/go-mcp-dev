---
title: MCPist 要件仕様書（spec-req）
aliases:
  - spec-req
  - MCPist-requirement-specification
tags:
  - MCPist
  - specification
  - requirement
document-type:
  - specification
document-class: specification
created: 2026-01-12T00:00:00+09:00
updated: 2026-01-14T00:00:00+09:00
---
# MCPist 要件仕様書（Requirement Specification）

本ドキュメントは、MCPistの要件定義をシステム観点で整理した仕様書である。

---

## ドキュメント管理情報

| 項目 | 値 |
|------|-----|
| Status | `current` |
| Version | v1.0 |
| Note | go-mcp-dev版と同一内容 |

---

## 1. プロダクト概要

### 1.1 プロダクト名

**MCPist** - Personal Context Management のためのセルフホスト型MCPサーバー

### 1.2 目的

LLMが「何を知り、何ができるか」を個人がコントロールし、Context Rot（コンテキストの腐敗）を防ぐ。

### 1.3 ターゲットユーザー

技術に精通した個人ユーザー:
- 外部サービスのOAuthアプリ登録・トークン管理ができる
- 複数サービスを個別にMCP化する運用負担を避けたい
- データの権限は自分で管理したい
- Context Rotが構造的問題だと理解している

---

## 2. 設計原則

### 2.1 コア設計原則

| 原則                             | 説明                 | 根拠              |
| ------------------------------ | ------------------ | --------------- |
| **シングルテナント・シングルユーザー・マルチアカウント** | 1人のユーザーが複数アカウントを管理 | 個人利用特化、信頼境界維持   |
| **オーケストレーターであり、エージェントではない**    | 判断・解釈をしない          | 責任境界の明確化        |
| **決定論的処理に徹する**                 | 非決定論的処理は行わない       | 非決定論的操作はLLMに委ねる |

### 2.2 スコープ外事項

以下はMCPistの責任範囲外:

| カテゴリ | 項目 | 理由 |
|---------|------|------|
| 非決定論的処理 | 要約、統合、再構成 | LLMが必要な処理 |
| 非決定論的処理 | ツール選択判断 | LLM側の責任 |
| ユーザー・組織 | マルチテナント対応 | シングルユーザー設計 |
| ユーザー・組織 | 他人のOAuthトークン管理 | セルフホスト前提 |
| プロトコル | MCP仕様の拡張 | MCP準拠で利用 |
| UI/UX | 通知制御、ログ表示 | クライアント側の責任 |

---

## 3. 機能要件サマリー

### 3.1 カテゴリ別機能数

| カテゴリ          | 機能数    | 概要                                 |
| ------------- | ------ | ---------------------------------- |
| コンテキスト制御      | 5      | メタツール、スキーマ動的取得                     |
| データアクセス制御     | 5      | アカウント分離、ツールマスク                     |
| 外部サービス連携      | 9      | モジュール、API呼び出し                      |
| RAG・知識検索      | 5      | セマンティック検索 #FIX 外す．これはモジュールレジストリの一種 |
| 記録・トレース       | 5      | ログ、監査                              |
| ツール設計         | 8      | 危険操作フラグ、確認ステップ                     |
| 並列・バックグラウンド実行 | 6      | batch、非同期処理                        |
| 管理UI          | 6      | OAuth登録、トークン管理                     |
| **合計**        | **49** |                                    |

### 3.2 優先度別機能数 #FIX 消す．これは計画書ではない

| 優先度 | 機能数 | 説明 |
|--------|--------|------|
| P0（必須） | 7 | コア機能 |
| P1（重要） | 9 | UX向上 |
| P2（推奨） | 11 | 完成度向上 |
| P3（将来） | 7 | 拡張機能 |

---

## 4. 非機能要件サマリー

### 4.1 カテゴリ別機能数

| カテゴリ | 機能数 | 概要 |
|---------|--------|------|
| アカウント・認証管理 | 6 | マルチアカウント、トークン暗号化 |
| ログ・可観測性 | 8 | 構造化ログ、ヘルスチェック |
| 安全設計 | 8 | 危険操作フラグ、確認ステップ |
| パフォーマンス | 4 | 高速レスポンス、コールドスタート対策 |
| 運用性 | 4 | 無料枠運用、放置運用 |
| 拡張性・保守性 | 4 | ステートレス、モジュール拡張 |
| 管理UI認証 | 3 | ログイン、セッション管理 |
| **合計** | **37** | |

### 4.2 性能目標

| 指標       | 目標値         | 備考                                    |
| -------- | ----------- | ------------------------------------- |
| レスポンス時間  | < 3秒（通常ツール） | 外部API依存                               |
| 可用性      | 99%（月次）     | 無料枠前提                                 |
| 同時接続     | 1（シングルユーザー） | #FIX 増やす．同一ユーザーが同時に別のクライアントを使うことがあり得る |
| コールドスタート | < 10秒       | 定期ヘルスチェックで回避                          |

### 4.3 セキュリティ要件

| 要件 | 仕様 |
|------|------|
| 通信暗号化 | TLS 1.3 |
| トークン暗号化 | AES-256-GCM |
| 認証方式 | OAuth 2.1 (JWT) |
| セッション管理 | 有効期限付きトークン |

---

## 5. 制約条件

### 5.1 技術制約

| 制約 | 理由 |
|------|------|
| 無料枠で運用可能 | 個人利用前提 |
| セルフホスト | データ主権の確保 |
| MCP仕様準拠 | 標準プロトコル利用 |

### 5.2 運用制約

| 制約 | 理由 |
|------|------|
| シングルユーザー | 設計簡素化 |
| 放置運用可能 | 運用負荷最小化 |
| 障害復旧が容易 | 個人管理前提 |

---

## 6. 関連ドキュメント

| ドキュメント | 内容 |
|-------------|------|
| [要件一覧](DAY3/requirements/req-list.md) | 全96要件 |
| [機能要件](DAY3/requirements/req-fnr.md) | 49機能 |
| [非機能要件](DAY3/requirements/req-nfr.md) | 37機能 |
| [スコープ外](DAY3/requirements/req-ofs.md) | 9カテゴリ |
| [仕様トレーサビリティ](spec-list.md) | 要件と仕様の対応 |
