---
title: MCPist マニュアル仕様サブコア定義
aliases:
  - dtl-mnl-cor
  - manual-sub-core
tags:
  - MCPist
  - architecture
  - sub-core
  - DTL
document-type: detail
document-class: DTL
created: 2026-01-14T00:00:00+09:00
updated: 2026-01-14T00:00:00+09:00
---
# MCPist マニュアル仕様サブコア定義

## ドキュメント管理情報

| 項目 | 値 |
|------|-----|
| Status | `current` |
| Version | v1.0 (DAY5) |
| Note | spec-mnl.mdからサブコア要件を抽出 |

---

## 概要

本ドキュメントは、spec-mnl.md（マニュアル仕様書）の中で、コア機能（COR-xxx）を前提とした場合に複数の独立した根拠を持つ要件を「サブコア」として定義する。

**評価基準:**
- コア機能を前提とした場合に、2つ以上の独立した根拠を持つ
- そのコア機能が変わらない限り、変更されない

---

## サブコア要件

### MNL-COR-001: マニュアル3分類体制

**前提コア:**
- COR-003 (サーバー側認証設計)
- COR-009 (モジュールCLI実装)

**独立した根拠（2つ）:**

| # | 根拠 | 由来コア |
|---|------|----------|
| 1 | サーバー側認証 → admin/user権限分離に対応したマニュアル分類が必要 | COR-003 |
| 2 | モジュールCLI実装 → 開発者向けにモジュール追加手順のドキュメント化が必要 | COR-009 |

**定義:**
```
マニュアル3分類:
├─ 管理者ガイド (admin-guide)
│  └─ 対象: 情シス担当
│  └─ 内容: 初期セットアップ、日常管理、ユーザー管理
├─ ユーザーガイド (user-guide)
│  └─ 対象: 一般社員
│  └─ 内容: ログイン、アカウント連携、LLMクライアント設定
└─ 開発者ガイド (dev-guide)
   └─ 対象: 開発者
   └─ 内容: ローカル環境、開発フロー、モジュール追加
```

**spec-mnl.mdでの位置:** 1. マニュアル一覧

---

### MNL-COR-002: 初期セットアップチェックリスト

**前提コア:**
- COR-003 (サーバー側認証設計)
- COR-101 ($0/月コスト制約)

**独立した根拠（2つ）:**

| # | 根拠 | 由来コア |
|---|------|----------|
| 1 | サーバー側認証 → Supabase Auth設定、Token Broker構成の手順化 | COR-003 |
| 2 | $0制約 → Supabase/Koyeb/Vercel/Grafana Cloudの無料枠構成の手順化 | COR-101 |

**定義:**
```
初期セットアップチェックリスト:
├─ Supabaseプロジェクト作成
│  ├─ Auth設定（Google/Microsoft/GitHub）
│  ├─ DBスキーマ適用
│  └─ Edge Functionsデプロイ
├─ 外部サービスOAuthアプリ登録
│  ├─ Google Calendar
│  ├─ Microsoft Graph
│  ├─ GitHub
│  ├─ Notion
│  └─ Jira / Confluence
├─ Koyebデプロイ
│  ├─ 環境変数設定
│  └─ ヘルスチェック確認
├─ Vercelデプロイ
│  └─ 環境変数設定
├─ Grafana Cloud設定
│  ├─ Loki（ログ）
│  └─ アラート設定
├─ 許可リスト登録
└─ 初回ログイン確認
```

**spec-mnl.mdでの位置:** 2.1 初期セットアップチェックリスト

---

### MNL-COR-003: モジュール追加手順

**前提コア:**
- COR-009 (モジュールCLI実装)
- COR-007 (Go採用)

**独立した根拠（2つ）:**

| # | 根拠 | 由来コア |
|---|------|----------|
| 1 | モジュールCLI実装 → 統一インターフェース実装手順の標準化 | COR-009 |
| 2 | Go採用 → Goでのモジュール実装、go testでのテスト手順 | COR-007 |

**定義:**
```
モジュール追加手順:
1. modules/配下にディレクトリ作成
2. Moduleインターフェース実装
   ├─ Name()
   ├─ Description()
   ├─ APIVersion()
   ├─ Tools()
   └─ Execute(ctx, tool, params)
3. ツール定義（inputSchema, outputSchema）
4. 単体テスト作成
5. 結合テスト作成
6. module_registryに登録

テスト実行:
├─ 単体テスト: go test ./...
├─ 結合テスト: go test -tags=integration ./...
└─ E2Eテスト: npx playwright test
```

**spec-mnl.mdでの位置:** 4.4 モジュール追加手順

---

## 非サブコア要件（単一根拠）

以下は重要な要件だが、コア機能からの導出が単一であるためサブコアとしない。

| 要件 | 根拠数 | 理由 |
|------|--------|------|
| ユーザーのログイン手順 | 1 | COR-003（サーバー側認証）からの単一導出 |
| ユーザーのアカウント連携手順 | 1 | COR-003からの単一導出 |
| LLMクライアント設定手順 | 1 | MCP仕様準拠からの単一導出 |
| 開発フロー（ブランチ戦略） | 1 | 品質管理からの単一導出 |
| デプロイ手順 | 1 | CI/CD要件からの単一導出 |
| 日常/月次チェックリスト | 1 | 運用品質からの単一導出 |

---

## サブコアマトリックス

| ID | サブコア要件 | 前提コア | 根拠数 |
|----|--------------|----------|--------|
| MNL-COR-001 | マニュアル3分類体制 | COR-003, COR-009 | 2 |
| MNL-COR-002 | 初期セットアップチェックリスト | COR-003, COR-101 | 2 |
| MNL-COR-003 | モジュール追加手順 | COR-009, COR-007 | 2 |

---

## 関連ドキュメント

- [dtl-core.md](dtl-core.md) - コア機能定義
- [spec-mnl.md](../DAY4/spec-mnl.md) - マニュアル仕様書
