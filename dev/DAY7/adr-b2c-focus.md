# ADR: B2Cフォーカス（個人課金モデル）

## ステータス

**承認済み** - 2026-01-16

## コンテキスト

MCPistの権限システム設計において、「管理者」のペルソナが曖昧だった。

- ベンダーに属する管理者なのか？
- ユーザーを束ねる組織の管理者なのか？

この曖昧さは、課金単位（個人 vs 組織）によってビジネスモデルが大きく異なることに起因する。

## 決定

**MCPistはB2C（個人課金）モデルに限定する。B2Bは対象外とする。**

### B2Cモデル（採用）

```
MCPist（ベンダー）
  │
  │ 直接課金
  ↓
ユーザー（個人）
```

- 顧客: 個人
- 課金主体: ユーザー本人
- 管理者: ベンダー側（監視・サポートのみ）
- ユーザー: 自分で課金・設定を管理

### B2Bモデル（対象外）

```
MCPist（ベンダー）
  │
  │ 契約・請求
  ↓
組織（企業）
  │
  │ 社内管理
  ↓
ユーザー（従業員）
```

- 顧客: 企業
- 課金主体: 組織
- ベンダー管理者: 組織単位の設定
- 組織管理者: 課金・ユーザー権限
- ユーザー: 組織が許可した範囲で利用

## 理由

### 1. 放置運用の原則に反する

MCPistの基本方針は「放置運用」。システムが自律的に動き、手動介入を最小化する。

B2Bモデルでは：
- 組織ごとの契約管理
- 組織管理者へのサポート対応
- 請求・支払いの法人対応
- SLA（サービスレベル契約）の遵守
- カスタム要件への対応

これらは全て**人的対応**を必要とし、放置運用と相容れない。

### 2. 複雑度の爆発

B2CとB2Bでは要件が根本的に異なる。

| 観点 | B2C | B2B |
|------|-----|-----|
| 顧客 | 個人 | 企業 |
| 課金主体 | ユーザー本人 | 組織 |
| 価格設定 | 個人向け定額 | ボリュームライセンス |
| 管理UI | 自己管理のみ | 組織管理 + 自己設定 |
| サポート | セルフサービス | 企業契約、SLA |
| 追加機能 | 不要 | SSO、監査ログ、RBAC... |

両方を1つのシステムで実現しようとすると、複雑度が爆発する。

### 3. 権限モデルの根本的な違い

B2C:
```
ユーザーが課金 → ユーザーが自由に使う
管理者（ベンダー）はツール制御できない
```

B2B:
```
組織が課金 → 組織管理者がツール制御 → ユーザーは制限内で使う
```

「管理者がツール制御できるか」という根本的な設計判断が異なる。

### 4. フォーカスの重要性

Phase 1は「自分＋友人5-10人」という規模。この段階でB2B機能を設計しても：

- 使われない機能が増える
- 開発・テストの負担が増える
- 本質的な機能の品質が下がる

## 検討した代替案

### 案A: 両対応（汎用設計）

```
if (個人課金) {
    // B2Cロジック
} else {
    // B2Bロジック
}
```

**却下理由**:
- 条件分岐が全体に波及
- テストケースが倍増
- どちらの顧客にも中途半端

### 案B: 組織機能を後から追加

B2Cで開始し、将来B2B機能を追加する。

**却下理由**:
- 権限モデルの根本的な違いにより、後付けが困難
- 「組織管理者」という概念を追加するとDBスキーマから変更が必要

### 案C: B2Cに限定（採用）

B2Cのみを対象とし、B2Bが必要になったら別プロダクトとして設計する。

**採用理由**:
- シンプルな設計を維持できる
- Phase 1の規模に適切
- 将来B2Bが必要になっても、コア（MCPサーバー、モジュール）は再利用可能

## 結果

### 採用した設計

1. **課金単位**: ユーザー個人
2. **管理者**: ベンダー側に属する（監視・サポートのみ）
3. **ツール制御**: ユーザー自身のみが可能
4. **組織の概念**: 持たない

### 将来B2Bが必要になった場合

- 別プロダクト or 別プランとして設計
- 共通のコア（MCPサーバー、モジュール）は再利用
- 管理層・課金層は新規構築

### 影響

- `admin_disabled` 拒否理由は不要（廃止済み）
- 管理者はツール単位の権限操作ができない
- 管理UIはユーザー監視・アカウント状態管理のみ

## 関連ドキュメント

- [dsn-permission-system.md](./dsn-permission-system.md) - 権限システムの詳細設計
- [adr-permission-naming.md](./adr-permission-naming.md) - 命名に関するADR
